
<!DOCTYPE html>
<html>
<head>
<title>Work Calculator</title>
</head>
<body>

<div class="w3-container w3-card-4 w3-blue w3-text-white w3-margin">
<label class="w3-large">Default Values</label><br>
	<label>Clock In </label><input style="width:100px" type="time" id="defaultclockin"> <br />
    <label>Clock Out </label><input style="width:100px" type="time" id="defaultclockout"> <br />
    <label>Lunch Duration 
<label style="font-size: small;"><i>(in minutes) </i></label></label><input style="width:100px" type="text" id="defaultlunchduration">
<br />
<label>Week Length </label>
<select name="weeklength" id="defaultweeklength">
  <option>--</option>
  <option value="38">38</option>
  <option value="39">39</option>
  <option value="40">40</option>
  <option value="41">41</option>
  <option value="42">42</option>
  <option value="43">43</option>
  <option value="44">44</option>
</select>
<br />
<input type="button" class="w3-button w3-blue" value="Change Default Values" onclick="newDefaults()">
    <br /> <br /> <br /> <br /> <br /> <br />
</div>

<div class="w3-container w3-card-4 w3-light-grey w3-text-blue w3-margin">

<div class="w3-row w3-section w3-border w3-padding">
<label class="w3-large">Monday</label><br>
<label>Clock In </label><input style="width:100px" type="time" id="mondayin">
<label>Clock Out </label><input style="width:100px" type="time" id="mondayout"> 
<label>Lunch Duration 
<label style="font-size: small;"><i>(in minutes)</i></label></label>
<input style="width:50px" type="text" id="mondaylunch"> 
<label>Daily Total:</label><input style="width:80px" type="text" id="mondaydailytotal" readonly="readonly"><br/><br />
</div>

<div class="w3-row w3-section w3-border w3-padding">
<label class="w3-large">Tuesday</label><br>
<label>Clock In </label><input style="width:100px" type="time" id="tuesdayin">
<label>Clock Out </label><input style="width:100px" type="time" id="tuesdayout"> 
<label>Lunch Duration <label style="font-size: small;"><i>(in minutes)</i></label> </label><input style="width:50px" type="text" id="tuesdaylunch">
<label>Daily Total:</label><input style="width:80px" type="text" id="tuesdaydailytotal" readonly="readonly"><br/><br />
</div>

<div class="w3-row w3-section w3-border w3-padding">
<label class="w3-large">Wednesday</label><br>
<label>Clock In </label><input style="width:100px" type="time" id="wednesdayin">
<label>Clock Out </label><input style="width:100px" type="time" id="wednesdayout"> 
<label>Lunch Duration <label style="font-size: small;"><i>(in minutes)</i></label> </label><input style="width:50px" type="text" id="wednesdaylunch">
<label>Daily Total:</label><input style="width:80px" type="text" id="wednesdaydailytotal" readonly="readonly"><br/><br />
</div>

<div class="w3-row w3-section w3-border w3-padding">
<label class="w3-large">Thursday</label><br>
<label>Clock In </label><input style="width:100px" type="time" id="thursdayin">
<label>Clock Out </label><input style="width:100px" type="time" id="thursdayout"> 
<label>Lunch Duration <label style="font-size: small;"><i>(in minutes)</i></label> </label><input style="width:50px" type="text" id="thursdaylunch">
<label>Daily Total:</label><input style="width:80px" type="text" id="thursdaydailytotal" readonly="readonly"><br/><br />
</div>

<div class="w3-row w3-section w3-border w3-padding">
<label class="w3-large">Friday</label><br>
<label>Clock In </label><input style="width:100px" type="time" id="fridayin">
<label>Clock Out </label><input style="width:100px" type="time" id="fridayout"> 
<label>Lunch Duration <label style="font-size: small;"><i>(in minutes)</i></label> </label><input style="width:50px" type="text" id="fridaylunch">
<label>Daily Total:</label><input style="width:80px" type="text" id="fridaydailytotal" readonly="readonly"><br/><br />
</div>

<div class="w3-margin">
<label class="w3-large">Weekly Total:</label><input style="width:80px" type="text" id="weeklytotal" readonly="readonly">
<label class="w3-large">Time Left:</label><input style="width:80px" type="text" id="timeleft" readonly="readonly">
<input type="button" class="w3-button w3-blue" value="Calculate" onclick="calcTotals()"><br/>
</div>

<div class="w3-margin">
<br /><br /><br /><br /><br /><br />
<label class="w3-large">Lunch Clock Out: </label><input style="width:100px" type="time" id="lunchout">
<label class="w3-large">Lunch Clock In: </label><input style="width:100px" type="time" id="lunchin">
<label class="w3-large">Lunch Duration: </label><input style="width:80px" type="text" id="lunchduration" readonly="readonly">
<input type="button" class="w3-button w3-blue" value="Calculate" onclick="calcLunch()"><br/>
</div>

</div>

<script>
var defaultclockin = '00:00';
var defaultclockout = '23:59';
var defaultlunchduration = '';
var defaultweeklength = '';

console.log(localStorage.getItem(defaultclockin));

function setDefaults(){ 
    document.getElementById("mondayin").value = localStorage.getItem(defaultclockin);
	document.getElementById("tuesdayin").value = localStorage.getItem(defaultclockin);
	document.getElementById("wednesdayin").value = localStorage.getItem(defaultclockin);
	document.getElementById("thursdayin").value = localStorage.getItem(defaultclockin);
	document.getElementById("fridayin").value = localStorage.getItem(defaultclockin);

	document.getElementById("mondayout").value = localStorage.getItem(defaultclockout);
	document.getElementById("tuesdayout").value = localStorage.getItem(defaultclockout);
	document.getElementById("wednesdayout").value = localStorage.getItem(defaultclockout);
	document.getElementById("thursdayout").value = localStorage.getItem(defaultclockout);
	document.getElementById("fridayout").value = localStorage.getItem(defaultclockout);

	document.getElementById("mondaylunch").value = localStorage.getItem(defaultlunchduration);
	document.getElementById("tuesdaylunch").value = localStorage.getItem(defaultlunchduration);
	document.getElementById("wednesdaylunch").value = localStorage.getItem(defaultlunchduration);
	document.getElementById("thursdaylunch").value = localStorage.getItem(defaultlunchduration);
	document.getElementById("fridaylunch").value = localStorage.getItem(defaultlunchduration);
    
    console.log(localStorage.getItem(defaultclockin));
}

function newDefaults(){
	var tempdefaultclockin = document.getElementById("defaultclockin").value;
    var tempdefaultclockout = document.getElementById("defaultclockout").value;
    var tempdefaultlunchduration = document.getElementById("defaultlunchduration").value;
    var tempdefaultweeklength = document.getElementById("defaultweeklength").value;
    
    if (tempdefaultclockin){
    	localStorage.setItem(defaultclockin, tempdefaultclockin);
		//defaultclockin = tempdefaultclockin;
    }
    
    if (tempdefaultclockout){
    	localStorage.setItem(defaultclockout, tempdefaultclockout);
		//defaultclockout = tempdefaultclockout;
    }
    
    if (tempdefaultlunchduration){
    	localStorage.setItem(defaultlunchduration, tempdefaultlunchduration);
		//defaultlunchduration = tempdefaultlunchduration;
    }
    
    if (tempdefaultweeklength){
    	localStorage.setItem(defaultweeklength, (tempdefaultweeklength * 60));
		//defaultweeklength = (tempdefaultweeklength * 60);
    }
    
    setDefaults();
}


function calcTotals(){

console.log(document.getElementById("mondayin").value);

calcTime(document.getElementById("mondayin").value, document.getElementById("mondayout").value, document.getElementById("mondaylunch").value,
'monday');

calcTime(document.getElementById("tuesdayin").value, document.getElementById("tuesdayout").value, document.getElementById("tuesdaylunch").value,
'tuesday');

calcTime(document.getElementById("wednesdayin").value, document.getElementById("wednesdayout").value, document.getElementById("wednesdaylunch").value,
'wednesday');

calcTime(document.getElementById("thursdayin").value, document.getElementById("thursdayout").value, document.getElementById("thursdaylunch").value,
'thursday');

calcTime(document.getElementById("fridayin").value, document.getElementById("fridayout").value, document.getElementById("fridaylunch").value,
'friday');
}


function calcTime(x, y, z, day){
	let clockin = x;
	let clockout = y;
	let lunch = z;

	var intime = clockin.split(/:/);
	var intotal = (intime[0] * 60) + (intime[1] * 1);

	var outtime = clockout.split(/:/);
	var outtotal = (outtime[0] * 60) + (outtime[1] * 1);

	var total = Number(outtotal - intotal - lunch);
    
    if (isNaN(total) === true){
    	total = 0;
    }
    
	displayTime(total, day);
	calcWeekly();
}

function calcLunchtime(x, y){
	let clockin = x;
	let clockout = y;

	var intime = clockin.split(/:/);
	var intotal = (intime[0] * 60) + (intime[1] * 1);

	var outtime = clockout.split(/:/);
	var outtotal = (outtime[0] * 60) + (outtime[1] * 1);

	var total = Number(outtotal - intotal);
    
    if (isNaN(total) === true){
    	total = 0;
    }

    document.getElementById("lunchduration").value = pad(total) + " minutes";
}

function displayTime(total, day){
	var displayhour = Math.floor(total/60);
	var displayminute = Number(total % 60);

    console.log(total);

	document.getElementById(day + "dailytotal").value = pad(displayhour) + ":" + pad(displayminute);
}

function pad(value){
	if(value < 10 && value >= 0) {
    	return '0' + value;
    } else {
    	return value;
    }
}

function calcWeekly(){

	let monday = document.getElementById("mondaydailytotal").value;
	let tuesday = document.getElementById("tuesdaydailytotal").value;
	let wednesday = document.getElementById("wednesdaydailytotal").value;
	let thursday = document.getElementById("thursdaydailytotal").value;
	let friday = document.getElementById("fridaydailytotal").value;

	var mondaytime = monday.split(/:/);
	var mondaytotal = (mondaytime[0] * 60) + (mondaytime[1] * 1);

	var tuesdaytime = tuesday.split(/:/);
	var tuesdaytotal = (tuesdaytime[0] * 60) + (tuesdaytime[1] * 1);

	var wednesdaytime = wednesday.split(/:/);
	var wednesdaytotal = (wednesdaytime[0] * 60) + (wednesdaytime[1] * 1);

	var thursdaytime = thursday.split(/:/);
	var thursdaytotal = (thursdaytime[0] * 60) + (thursdaytime[1] * 1);

	var fridaytime = friday.split(/:/);
	var fridaytotal = (fridaytime[0] * 60) + (fridaytime[1] * 1);

	var weektotal = mondaytotal + tuesdaytotal + wednesdaytotal + thursdaytotal + fridaytotal;
    

    var workweek = localStorage.getItem(defaultweeklength);
  
    var timeleft = workweek - weektotal;
    var displaytimelefthour = Math.floor(timeleft/60);
	var displaytimeleftminute = timeleft % 60;
    document.getElementById("timeleft").value = pad(displaytimelefthour) + ":" + pad(displaytimeleftminute);

	var displayweekhour = Math.floor(weektotal/60);
	var displayweekminute = weektotal % 60;
	document.getElementById("weeklytotal").value = pad(displayweekhour) + ":" + pad(displayweekminute);

}

function calcLunch(){
	calcLunchtime(document.getElementById("lunchout").value, document.getElementById("lunchin").value);
}
</script>

</body>
</html>
